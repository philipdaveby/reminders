(this.webpackJsonpreminders=this.webpackJsonpreminders||[]).push([[0],{50:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(33),o=n.n(c),s=(n(50),n(6)),i=n(2),u=n.n(i),l=n(4),d=a.a.createContext(null),p={backend_url:"https://pure-shelf-04149.herokuapp.com"},b=n.p+"static/media/close1.b1f68317.png",f=n.p+"static/media/add1.4be40fd6.png",m=n.p+"static/media/save1.ca727b2f.png",j=n.p+"static/media/filter.c59977a1.png",h=n(0),x=function(t){var e=t.socket,n=t.todos,a=t.filtered,c=t.setFiltered,o=Object(r.useState)(!1),i=Object(s.a)(o,2),x=i[0],O=i[1],g=Object(r.useContext)(d),v=Object(r.useRef)(null),k=function(){var t=Object(l.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=n.currentTarget.task.value){t.next=4;break}return t.abrupt("return");case 4:return O(!1),a={task:r,userId:null===g||void 0===g?void 0:g.uid},n.currentTarget.task.value="",t.next=9,null===g||void 0===g?void 0:g.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify({todoObject:a})}).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t.message)}));case 9:e.emit("add-todo");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){O(!x),setTimeout((function(){var t;null===(t=v.current)||void 0===t||t.focus()}))};return Object(h.jsx)("div",{className:"z-10 fixed bottom-0 w-full",children:Object(h.jsxs)("form",{onSubmit:function(t){return k(t)},className:"flex max-w-3xl m-auto justify-evenly items-center  pb-2 bg-white",children:[n&&void 0===n[0]&&Object(h.jsxs)("div",{className:"fixed top-40",children:[Object(h.jsx)("h1",{className:"text-2xl mt-14",children:"Create your first To-Do"}),Object(h.jsx)("button",{onClick:w,children:Object(h.jsx)("img",{className:"w-14",src:f,alt:"Add new to-do"})})]}),Object(h.jsx)("button",{type:"submit",title:"Save to-do",className:x?"":"invisible",children:Object(h.jsx)("img",{className:"w-9",src:m,alt:"Add to-do"})}),Object(h.jsx)("input",{ref:v,type:"text",name:"task",placeholder:"Enter your to-do...",className:x?"rounded mx-2 h-8":"invisible rounded mx-2 h-8"}),Object(h.jsxs)("div",{className:"flex justify-around items-center",children:[Object(h.jsx)("img",{src:b,alt:"Close to-do input",title:"Close",className:x?"w-12 cursor-pointer":"w-12 cursor-pointer hidden",onClick:function(){return O(!x)}}),n&&n[0]&&Object(h.jsx)("img",{src:f,alt:"add new to-do",title:"Add new to-do",className:x?"w-12 cursor-pointer hidden":"w-12 cursor-pointer",onClick:w}),n&&n[0]&&Object(h.jsx)("button",{type:"button",title:"Filter completed to-dos",onClick:function(){return c(!a)},className:"",children:Object(h.jsx)("img",{className:a?"w-14 transform rotate-90 border-2 rounded-full mr-4":"w-14 transform rotate-90 mr-4",src:j,alt:"Filter your to-dos"})})]})]})})},O=n(7);n(53);O.a.initializeApp({apiKey:"AIzaSyD-nlkie1qOOK8W_u_CgQLgWOHE3l0oia4",authDomain:"reminders-development.firebaseapp.com",projectId:"reminders-development",storageBucket:"reminders-development.appspot.com",messagingSenderId:"388686471557",appId:"1:388686471557:web:a2de16b04699831210e4ec"});var g=O.a.auth(),v=n(35),k=(n(55),function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.signOut();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),w=function(t,e){return Object(v.b)(t,{toastId:e})},N=n.p+"static/media/delete1.17136cb9.png",y=n.p+"static/media/edit1.81df9553.png",S=n.p+"static/media/done2.a05ae916.png",T=function(t){var e=t.sub,n=t.socket,a=t.todo,c=t.edit,o=t.completed,i=Object(r.useState)(!1),d=Object(s.a)(i,2),f=d[0],j=d[1],x=Object(r.useState)(""),g=Object(s.a)(x,2),v=g[0],k=g[1],w=Object(r.useRef)(null),T=function(){var t=Object(l.a)(u.a.mark((function t(r){var c,o,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.todoId,s=r.currentTarget.id,t.next=4,null===(c=O.a.auth().currentUser)||void 0===c?void 0:c.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(o,"/subtasks/").concat(s),{method:"PATCH",headers:{Authorization:n,"Content-Type":"application/json"},body:JSON.stringify({isComplete:!e.isComplete})}).catch((function(t){return console.log(t.message)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){return n.emit("add-todo")})).catch((function(t){return console.log(t.message)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(l.a)(u.a.mark((function t(e){var r,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.todoId,o=e.currentTarget.id,t.next=4,null===(r=O.a.auth().currentUser)||void 0===r?void 0:r.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(c,"/subtasks/").concat(o),{method:"DELETE",headers:{Authorization:e}});case 2:n.emit("add-todo");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t.message)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){j((function(t){return!t})),setTimeout((function(){var t;null===(t=w.current)||void 0===t||t.focus()}))},A=function(){var t=Object(l.a)(u.a.mark((function t(e){var r,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),c=a.todoId,o=e.currentTarget.id,t.next=5,null===(r=O.a.auth().currentUser)||void 0===r?void 0:r.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(c,"/subtasks/").concat(o),{method:"PATCH",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify({subTask:v})}).then((function(){n.emit("add-todo"),k(""),j(!1)})).catch((function(t){return console.log(t.message)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t.message)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("li",{className:e.isComplete?"grid grid-cols-4 order-last":"grid grid-cols-4 order-first",children:[f?Object(h.jsx)("button",{id:e.subId.toString(),onClick:function(t){return A(t)},className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:m,title:"Save sub task",alt:"save edited sub task",className:"w-7"})}):Object(h.jsx)("button",{id:e.subId.toString(),onClick:T,className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:S,title:"Mark sub task as done",alt:"mark sub task as done",className:o?"w-6 filter opacity-30":"w-6"})}),f?Object(h.jsx)("form",{className:"m-1 border rounded col-start-2 col-end-4",onSubmit:function(t){return A(t)},id:e.subId.toString(),children:Object(h.jsx)("input",{onChange:function(t){return k(t.currentTarget.value)},ref:w,defaultValue:e.task})}):Object(h.jsx)("div",{className:"flex col-start-2 col-end-4 justify-center",children:Object(h.jsx)("p",{className:e.isComplete||o?"text-base self-center text-lightgray line-through":"text-base self-center",children:e.task})}),Object(h.jsxs)("div",{className:"flex content-center justify-items-end",children:[c&&Object(h.jsx)("button",{"data-testid":"edit-menu",id:e.subId.toString(),title:"Edit sub task",onClick:I,className:f?"hidden m-1 pl-1 pr-1 cursor-pointer":"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:y,alt:"editSub sub task",className:"w-7"})}),Object(h.jsx)("button",{id:e.subId.toString(),title:"Cancel",onClick:I,className:f?"m-1 pl-1 pr-1 cursor-pointer":"hidden m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:b,alt:"editSub sub task",className:"w-7"})}),Object(h.jsx)("button",{id:e.subId.toString(),title:"Delete sub task",onClick:function(t){return C(t)},className:c?"m-1 pl-1 pr-1 cursor-pointer":"hidden m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:N,alt:"delete sub task",className:"w-8"})})]})]},e.subId)},C=n.p+"static/media/addPerson4.21917489.png",I=function(t){var e=t.todo,n=t.edit,r=t.completed,a=t.saveTodo,c=t.addSubTask,o=t.addPersonInput,s=t.editTodo,i=t.socket,d=function(){var t=Object(l.a)(u.a.mark((function t(e){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.currentTarget.id,t.next=3,null===(n=O.a.auth().currentUser)||void 0===n?void 0:n.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(a),{method:"PATCH",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify({isComplete:!r})});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){return i.emit("add-todo")})).catch((function(t){return console.log(t.message)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(l.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.currentTarget.id,t.next=3,null===(n=O.a.auth().currentUser)||void 0===n?void 0:n.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(r),{method:"DELETE",headers:{Authorization:e}});case 2:i.emit("add-todo");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t.message)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[!n&&Object(h.jsx)("button",{id:e.todoId.toString(),onClick:function(t){return d(t)},title:"Mark as done",className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:S,alt:"mark to-do as done",className:"w-7"})}),n&&Object(h.jsx)("button",{id:e.todoId.toString(),onClick:function(t){return a(t)},title:"Save to-do",className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:m,alt:"save to-do",className:"w-7"})}),Object(h.jsx)("button",{id:e.todoId.toString(),onClick:function(){return c()},title:"Add new sub task",className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:f,alt:"add new to-do",className:"w-7"})}),Object(h.jsx)("button",{id:e.todoId.toString(),onClick:o,title:"Add new collaborator",className:"pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:C,alt:"add person to to-do",className:"w-7"})}),Object(h.jsx)("button",{id:e.todoId.toString(),onClick:s,title:"Edit to-do",className:n?"hidden m-1 pl-1 pr-1 cursor-pointer":"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:y,alt:"edit to-do",className:"w-7"})}),Object(h.jsx)("button",{id:e.todoId.toString(),onClick:s,title:"Cancel",className:n?"m-1 pl-1 pr-1 cursor-pointer":"hidden m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:b,alt:"edit to-do",className:"w-7"})}),Object(h.jsx)("button",{id:e.todoId.toString(),onClick:function(t){return j(t)},title:"Delete to-do",className:"pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:N,alt:"delete to-do",className:"w-8"})})]})},A=n.p+"static/media/arrow.ca38e953.png",E=n.p+"static/media/send.677d68a9.png",z=n.p+"static/media/person.4720863e.png",P=function(t){var e=t.todo,n=t.socket,c=t.getTodos,o=Object(r.useState)(null),i=Object(s.a)(o,2),d=i[0],f=i[1],j=Object(r.useState)(!1),x=Object(s.a)(j,2),g=x[0],v=x[1],k=Object(r.useState)(!1),N=Object(s.a)(k,2),y=N[0],S=N[1],C=Object(r.useState)(""),P=Object(s.a)(C,2),D=P[0],_=P[1],R=Object(r.useState)(!1),U=Object(s.a)(R,2),J=U[0],F=U[1],H=Object(r.useState)(!1),Y=Object(s.a)(H,2),L=Y[0],M=Y[1],W=Object(r.useState)(null),q=Object(s.a)(W,2),B=q[0],K=q[1],V=a.a.useRef(null),Z=a.a.useRef(null),G=a.a.useRef(null),Q=function(){var t=Object(l.a)(u.a.mark((function t(e){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),d){t.next=4;break}return F((function(t){return!t})),t.abrupt("return");case 4:return F(!1),a=e.currentTarget.id,t.next=8,null===(r=O.a.auth().currentUser)||void 0===r?void 0:r.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(a),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify({task:d})});case 2:c(),f(null);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){return n.emit("add-todo")})).catch((function(t){return console.log(t.message)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:F((function(t){return!t})),setTimeout((function(){var t;null===(t=Z.current)||void 0===t||t.focus()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=Object(l.a)(u.a.mark((function t(e){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),a=e.currentTarget.id,t.next=4,null===(r=O.a.auth().currentUser)||void 0===r?void 0:r.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(a),{method:"PATCH",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify({subTask:D})}).catch((function(t){return console.log(t.message)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){return n.emit("add-todo")})).catch((function(t){return console.log(t.message)}));case 4:_(""),S(!1),v(!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tt=function(){g&&S(!1),v(!g)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("li",{className:e.isComplete?"z-0 relative border border-blue-900 rounded-lg m-2 mx-4 shadow-sm bg-li order-last":"z-0 relative border border-blue-900 rounded-lg m-2 mx-4 shadow-sm bg-li order-first",children:[e.collaborators[0]&&Object(h.jsx)("img",{src:z,alt:"You are collaborating on this to-do",title:"You are collaborating on this to-do",className:"absolute top-1 left-1 cursor-pointer w-7"}),J?Object(h.jsx)("form",{onSubmit:function(t){return Q(t)},id:e.todoId.toString(),children:Object(h.jsx)("input",{ref:Z,onChange:function(t){return f(t.currentTarget.value)},defaultValue:e.task,className:"m-1 border rounded"})}):Object(h.jsx)("div",{id:e.todoId.toString(),className:"mb-2",children:Object(h.jsx)("h3",{id:e.todoId.toString(),onClick:tt,className:e.isComplete?"text-lg text-lightgray line-through cursor-pointer m-auto":"text-lg cursor-pointer m-auto",children:e.task})}),e.subTasks[0]&&Object(h.jsx)("img",{src:A,title:"Expand",onClick:tt,alt:"Open sub tasks",className:g?"w-7 absolute top-1 right-1 cursor-pointer transform rotate-180":"w-7 absolute top-1 right-1 cursor-pointer"}),Object(h.jsx)("ul",{className:"flex flex-col",children:g&&e.subTasks.map((function(t,r){return Object(h.jsx)(T,{sub:t,socket:n,todo:e,edit:J,completed:e.isComplete},r)}))}),y&&Object(h.jsxs)("form",{className:"flex content-center justify-center",onSubmit:function(t){return X(t)},id:e.todoId.toString(),children:[Object(h.jsx)("input",{onChange:function(t){return _(t.currentTarget.value)},ref:V,className:"m-1 border rounded"}),Object(h.jsx)("button",{type:"submit",title:"Save sub task",className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:m,alt:"save sub task",className:"w-7"})}),Object(h.jsx)("button",{type:"button",onClick:function(){return S(!1)},title:"Cancel",className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:b,alt:"close input box",className:"w-7"})})]}),L&&Object(h.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault();var r=t.currentTarget.id;B&&(e.collaborators.some((function(t){return t.email===B}))?w("The collaborator already has access.","already-access"):(O.a.auth().fetchSignInMethodsForEmail(B).then((function(t){var e;0!==t.length?null===(e=O.a.auth().currentUser)||void 0===e||e.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos/").concat(r),{method:"PATCH",headers:{Authorization:e,"Content-Type":"application/json"},body:JSON.stringify({collaborator:B})}).catch((function(t){return console.log(t.message)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){n.emit("add-todo"),M(!1),w("You have added ".concat(B," as a collaborator to your todo!"),"added-collaborator")})).catch((function(t){return console.log(t.message)})):w("There is no existing account with that e-mail address","no-account")})).catch((function(t){"auth/invalid-email"===t.code&&w("Please enter a valid e-mail address","enter-valid-email")})),K(null)))}(t)},id:e.todoId.toString(),className:"flex content-center justify-center",children:[Object(h.jsx)("button",{type:"submit",title:"Send invite",id:e.todoId.toString(),className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:E,alt:"Invite collaborator",className:"w-7",id:e.todoId.toString()})}),Object(h.jsx)("input",{onChange:function(t){return K(t.currentTarget.value)},placeholder:"Enter email to add person..",ref:G,className:"m-1 w-60 border rounded"}),Object(h.jsx)("button",{type:"button",onClick:function(){return M(!1)},title:"Cancel",className:"m-1 pl-1 pr-1 cursor-pointer",children:Object(h.jsx)("img",{src:b,alt:"close input box",className:"w-7"})})]}),Object(h.jsx)(I,{edit:J,todo:e,completed:e.isComplete,saveTodo:Q,addSubTask:function(){S(!y),setTimeout((function(){var t;null===(t=V.current)||void 0===t||t.focus()}))},addPersonInput:function(){M((function(){return!L})),setTimeout((function(){var t;null===(t=G.current)||void 0===t||t.focus()}))},editTodo:$,socket:n})]})})},D=function(t){var e=t.todos,n=t.socket,a=t.getTodos,c=t.filtered,o=Object(r.useState)(e),i=Object(s.a)(o,2),u=i[0],l=i[1];Object(r.useEffect)((function(){d()}),[c,a]);var d=function(){if(c){var t=null===e||void 0===e?void 0:e.filter((function(t){return!0===t.isComplete}));t&&l(t)}c||l(e)};return Object(h.jsxs)("div",{className:"max-w-2xl m-auto mt-4 z-0",children:[c&&Object(h.jsx)("h2",{className:"text-2xl mt-4 font-roboto border-b-2",children:"Done todos"}),c?Object(h.jsx)("ul",{className:"flex flex-col pt-5 pb-16 bg-white m-auto",children:u&&u.map((function(t){return Object(h.jsx)(P,{getTodos:a,todo:t,socket:n},t.todoId)}))}):Object(h.jsx)("ul",{className:"flex flex-col pb-16 bg-white m-auto z-0",children:e&&e.map((function(t){return Object(h.jsx)(P,{getTodos:a,todo:t,socket:n},t.todoId)}))})]})},_=n(5),R=function(t){var e=t.socket,n=t.todos,a=t.setTodos,c=Object(r.useState)(!0),o=Object(s.a)(c,2),i=o[0],d=o[1],b=Object(r.useState)(!1),f=Object(s.a)(b,2),m=f[0],j=f[1],g=Object(_.f)();Object(r.useEffect)((function(){var t=O.a.auth().onAuthStateChanged((function(t){if(t){d(!t);var e=localStorage.getItem("todos");e&&a(JSON.parse(e)),v()}else g.push("/login")}));return function(){return t()}}),[]),Object(r.useEffect)((function(){return e.on("update-todos",(function(){return v()})),function(){e.off("update-todos")}}),[e]);var v=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.a.auth().onAuthStateChanged((function(t){null===t||void 0===t||t.getIdToken(!0).then(function(){var t=Object(l.a)(u.a.mark((function t(e){var r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(p.backend_url,"/api/todos"),{method:"GET",headers:{Authorization:e}});case 2:return r=t.sent,t.next=5,r.json();case 5:(c=t.sent)!==n&&(localStorage.setItem("todos",JSON.stringify(c)),a(c));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log("We had an error loading data: "+t)}))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:i?Object(h.jsx)("div",{}):Object(h.jsxs)("main",{className:"h-full",children:[Object(h.jsx)(D,{getTodos:v,todos:n,socket:e,filtered:m}),Object(h.jsx)(x,{socket:e,todos:n,filtered:m,setFiltered:j})]})})},U=n(24),J=function(){var t=Object(_.f)();return Object(h.jsxs)("div",{className:"w-full",children:[Object(h.jsx)("div",{className:"fixed w-full bg-white z-10",children:Object(h.jsxs)("nav",{className:"flex justify-around items-center h-12 m-auto max-w-2xl",children:[Object(h.jsx)(U.b,{exact:!0,to:"/",className:function(t){return t?"border-b-2 border-t-2 font-medium tracking-wide px-2 text-lg text-textblue hover:text-textdarkblue":"border-b border-t opacity-90 tracking-wide px-2 text-lg text-textblue hover:text-textdarkblue"},children:"HOME"}),Object(h.jsx)(U.b,{to:"/profile",className:function(t){return t?"border-b-2 border-t-2 font-medium tracking-wide px-2 text-lg text-textblue hover:text-textdarkblue":"border-b border-t opacity-90 tracking-wide px-2 text-lg text-textblue hover:text-textdarkblue"},children:"PROFILE"})]})}),Object(h.jsx)("h1",{onClick:function(){return t.push("/")},className:"cursor-pointer font-serif tracking-wider text-4xl mt-16 mx-auto w-4/5 max-w-sm",children:"REMINDERS"}),Object(h.jsx)("h2",{className:"tracking-wider text-xl font-extralight font mt-1 mx-auto w-4/5 max-w-sm",children:"To-do's together"})]})},F=function(){var t=Object(r.useRef)(null),e=Object(r.useRef)(null),n=Object(r.useRef)(null),a=Object(_.f)(),c=function(){var r=Object(l.a)(u.a.mark((function r(c){var o,s;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),t.current&&e.current&&n.current){r.next=3;break}return r.abrupt("return");case 3:if(i=t.current.value,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(i).toLowerCase())){r.next=6;break}return w("Your email does not have a correct format, please try again.","incorrect-format"),r.abrupt("return");case 6:if((null===(o=e.current)||void 0===o?void 0:o.value)===(null===(s=n.current)||void 0===s?void 0:s.value)){r.next=11;break}return w("Your passwords does not match, please try again.","not-matching-passwords"),e.current.value="",n.current.value="",r.abrupt("return");case 11:return r.prev=11,r.next=14,g.createUserWithEmailAndPassword(t.current.value,e.current.value);case 14:w("You have completed your signup!","completed-signup"),a.push("/"),r.next=23;break;case 18:r.prev=18,r.t0=r.catch(11),"auth/email-already-in-use"===r.t0.code&&w("The email address is already in use by another account","already-in-use"),"auth/weak-password"===r.t0.code&&w("Your password needs to be at least 6 characters","6-characters"),console.error(r.t0);case 23:case"end":return r.stop()}var i}),r,null,[[11,18]])})));return function(t){return r.apply(this,arguments)}}();return Object(h.jsxs)("form",{className:"mt-2 flex flex-col m-auto",onSubmit:function(t){return c(t)},children:[Object(h.jsx)("h2",{className:"h2",children:"Create your new account"}),Object(h.jsx)("input",{className:"mt-3",type:"email",placeholder:"email",ref:t}),Object(h.jsx)("input",{className:"mt-3",type:"password",placeholder:"password",ref:e}),Object(h.jsx)("input",{className:"mt-3 mb-4",type:"password",placeholder:"confirm password",ref:n}),Object(h.jsx)("button",{className:"button",type:"submit",onClick:function(t){return c(t)},children:"Sign Up"}),Object(h.jsx)("p",{className:"mt-6 md:mt-12",children:"Do you already have an account?"}),Object(h.jsx)("button",{className:"button",type:"button",onClick:function(){return a.push("/login")},children:"Log In"})]})},H=function(){var t=Object(r.useRef)(null),e=Object(r.useRef)(null),n=Object(_.f)(),a=function(){var r=Object(l.a)(u.a.mark((function r(a){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),null!==t.current&&null!==e.current&&""!==t.current.value&&""!==e.current.value){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,g.signInWithEmailAndPassword(t.current.value,e.current.value);case 6:n.push("/",{from:"login"}),r.next=15;break;case 9:r.prev=9,r.t0=r.catch(3),"auth/user-not-found"===r.t0.code&&w("There is no user record corresponding to this identifier. Please try again","no-user"),"auth/wrong-password"===r.t0.code&&w("The password is invalid. Please try again","invalid-passowrd"),"auth/invalid-email"===r.t0.code&&w("Please provide a valid email","invalid-email"),console.error(r.t0);case 15:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(t){return r.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"mt-16",children:[Object(h.jsx)("h2",{className:"h2",children:"Sign in"}),Object(h.jsxs)("form",{className:"flex flex-col max-w-3/4 md:max-w-xxs m-auto justify-items-center justify-center",children:[Object(h.jsx)("input",{className:"mb-3",type:"email",required:!0,placeholder:"email",ref:t}),Object(h.jsx)("input",{type:"password",placeholder:"password",ref:e,className:"mb-4"}),Object(h.jsx)("button",{type:"submit",onClick:function(t){return a(t)},className:"button",children:"Sign In"}),Object(h.jsx)("p",{className:"mt-8",children:"Not registered yet?"}),Object(h.jsx)("button",{className:"button",onClick:function(){return n.push("/signup")},children:"Create a new account"})]})]})},Y=function(t){var e=t.children,n=Object(r.useState)(null),a=Object(s.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){return g.onAuthStateChanged((function(t){o(t)}))}),[]),Object(h.jsx)(d.Provider,{value:c,children:e})},L=function(t){var e,n=t.setTodos,a=null===(e=O.a.auth().currentUser)||void 0===e?void 0:e.email,c=Object(r.useContext)(d),o=Object(_.f)();Object(r.useEffect)((function(){O.a.auth().onAuthStateChanged((function(t){t||o.push("/login")}))}));return Object(h.jsx)("div",{children:c?Object(h.jsxs)("div",{className:"max-w-3/4 md:max-w-sm mx-auto mt-6 md:mt-12 p-4 border-4 rounded-xl",children:[Object(h.jsx)("h1",{className:"text-2xl",children:"Profile"}),Object(h.jsxs)("p",{className:"text-lg mt-20 mb-6",children:["Your email: ",a]}),Object(h.jsx)("button",{onClick:function(){localStorage.clear(),n(null),k(),o.push("/login")},className:"button",children:"Sign Out"})]}):Object(h.jsx)(H,{})})},M=n(40),W=function(){var t=Object(r.useState)(M.a),e=Object(s.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(null),o=Object(s.a)(c,2),i=o[0],u=o[1];return Object(r.useEffect)((function(){var t=Object(M.a)(p.backend_url,{reconnectionDelay:1e3,reconnection:!0,transports:["websocket"],agent:!1,upgrade:!1,rejectUnauthorized:!1});return a(t),function(){console.log("disconnecting socket"),n.disconnect()}}),[]),Object(h.jsx)("div",{id:"app",className:"flex w-full flex-col h-screen",children:Object(h.jsxs)(Y,{children:[Object(h.jsx)(J,{}),Object(h.jsxs)(_.c,{children:[Object(h.jsx)(_.a,{exact:!0,path:"/",render:function(){return Object(h.jsx)(R,{socket:n,todos:i,setTodos:u})}}),Object(h.jsx)(_.a,{path:"/signup",component:F}),Object(h.jsx)(_.a,{path:"/login",component:H}),Object(h.jsx)(_.a,{path:"/profile",render:function(){return Object(h.jsx)(L,{setTodos:u})}})]})]})})};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsxs)(U.a,{children:[Object(h.jsx)(W,{}),Object(h.jsx)(v.a,{})]})}),document.getElementById("root"))}},[[67,1,2]]]);